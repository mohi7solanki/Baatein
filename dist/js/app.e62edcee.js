(function(e){function t(t){for(var n,r,o=t[0],c=t[1],u=t[2],l=0,h=[];l<o.length;l++)r=o[l],a[r]&&h.push(a[r][0]),a[r]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);d&&d(t);while(h.length)h.shift()();return i.push.apply(i,u||[]),s()}function s(){for(var e,t=0;t<i.length;t++){for(var s=i[t],n=!0,o=1;o<s.length;o++){var c=s[o];0!==a[c]&&(n=!1)}n&&(i.splice(t--,1),e=r(r.s=s[0]))}return e}var n={},a={app:0},i=[];function r(t){if(n[t])return n[t].exports;var s=n[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,r),s.l=!0,s.exports}r.m=e,r.c=n,r.d=function(e,t,s){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(r.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(s,n,function(t){return e[t]}.bind(null,n));return s},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var u=0;u<o.length;u++)t(o[u]);var d=c;i.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("cd49")},"21eb":function(e,t,s){},"37f3":function(e,t,s){"use strict";var n=s("21eb"),a=s.n(n);a.a},"57bc":function(e,t,s){"use strict";var n=s("ce89"),a=s.n(n);a.a},"7c55":function(e,t,s){"use strict";var n=s("d3dd"),a=s.n(n);a.a},a3a3:function(e,t,s){},c226:function(e,t,s){"use strict";var n=s("a3a3"),a=s.n(n);a.a},cd49:function(e,t,s){"use strict";s.r(t);s("cadf"),s("551c"),s("097d");var n=s("2b0e"),a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"app"}},[s("router-view")],1)},i=[],r=(s("7c55"),s("2877")),o={},c=Object(r["a"])(o,a,i,!1,null,null,null);c.options.__file="App.vue";var u=c.exports,d=s("8c4f"),l=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"md-layout md-gutter md-alignment-center-center register-div"},[s("md-card",{staticClass:"register-card",attrs:{"md-with-hover":""}},[s("md-card-header",[s("div",{staticClass:"md-title"},[s("md-icon",[e._v("chat")]),e._v(" Baatein - Register")],1),s("div",{staticClass:"md-subhead"},[e._v("Not like slack though :(")])]),s("md-card-content",[s("md-field",[s("label",[e._v("Username")]),s("md-input",{model:{value:e.username,callback:function(t){e.username=t},expression:"username"}})],1),s("md-field",[s("label",[e._v("Password")]),s("md-input",{attrs:{type:"password"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1)],1),s("hr"),s("md-card-actions",[s("md-button",{on:{click:e.login}},[e._v("Login")]),s("md-button",{on:{click:e.register}},[e._v("Register")])],1)],1)],1),s("md-snackbar",{attrs:{"md-position":e.position,"md-duration":e.isInfinity?1/0:e.duration,"md-active":e.showSnackbar,"md-persistent":""},on:{"update:mdActive":function(t){e.showSnackbar=t}}},[s("span",[e._v(e._s(e.snackbarMessage))])])],1)},h=[],m=(s("96cf"),s("3040")),f=s("bc3a"),g=s.n(f),p=function(){return g.a.create({baseURL:"http://localhost:8082",withCredentials:!0})},b={register:function(e){return p().post("user/register",e)},signin:function(e){return p().post("user/signin",e).then(function(e){return e})},logout:function(){return p().get("user/logout").then(function(e){return e})}},v={data:function(){return{username:"",password:"",showSnackbar:!1,position:"left",duration:4e3,isInfinity:!1,snackbarMessage:""}},methods:{register:function(){var e=Object(m["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(""!==this.username||""!==this.password){e.next=5;break}this.showSnackbar=!0,this.snackbarMessage="Username and password can't be left empty",e.next=19;break;case 5:if(""!==this.password){e.next=10;break}this.showSnackbar=!0,this.snackbarMessage="Password can't be left empty",e.next=19;break;case 10:if(""!==this.username){e.next=15;break}this.showSnackbar=!0,this.snackbarMessage="Username can't be left empty",e.next=19;break;case 15:return e.next=17,b.register({username:this.username,password:this.password});case 17:t=e.sent,200===t.status?(this.showSnackbar=!0,this.snackbarMessage="Registered successfully",setTimeout(function(){this.$router.push({name:"signin"})}.bind(this),1e3)):(this.showSnackbar=!0,this.snackbarMessage="There was some error while registering");case 19:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),login:function(){this.$router.push({name:"signin"})}}},k=v,_=(s("57bc"),Object(r["a"])(k,l,h,!1,null,"482acbe0",null));_.options.__file="Register.vue";var w=_.exports,y=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"md-layout md-gutter md-alignment-center-center signin-div"},[s("md-card",{staticClass:"signin-card",attrs:{"md-with-hover":""}},[s("md-card-header",[s("div",{staticClass:"md-title"},[s("md-icon",[e._v("chat")]),e._v(" Baatein - Login")],1)]),s("md-card-content",[s("md-field",[s("label",[e._v("Username")]),s("md-input",{model:{value:e.username,callback:function(t){e.username=t},expression:"username"}})],1),s("md-field",[s("label",[e._v("Password")]),s("md-input",{attrs:{type:"password"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1)],1),s("hr"),s("md-card-actions",[s("md-button",{on:{click:e.register}},[e._v("Register")]),s("md-button",{on:{click:e.login}},[e._v("Login")])],1)],1)],1),s("md-snackbar",{attrs:{"md-position":e.position,"md-duration":e.isInfinity?1/0:e.duration,"md-active":e.showSnackbar,"md-persistent":""},on:{"update:mdActive":function(t){e.showSnackbar=t}}},[s("span",[e._v(e._s(e.snackbarMessage))])])],1)},x=[],U={getAllUsers:function(){return p().get("users").then(function(e){return e})},isLoggedin:function(){return p().get("user/isloggedin").then(function(e){return e})}},S={data:function(){return{username:"",password:"",showSnackbar:!1,position:"left",duration:4e3,isInfinity:!1,snackbarMessage:""}},methods:{login:function(){b.signin({username:this.username,password:this.password}).then(function(e){this.$router.push({name:"userDash",params:{username:this.username}})}.bind(this),function(e){this.showSnackbar=!0,this.snackbarMessage="Invalid username or password"}.bind(this))},register:function(){this.$router.push({name:"register"})},isLoggedin:function(){U.isLoggedin().then(function(e){this.$router.push({name:"userDash",params:{username:e.data.username}})}.bind(this),function(e){this.$router.push({name:"signin"})}.bind(this))}},beforeMount:function(){this.isLoggedin()}},C=S,M=(s("c226"),Object(r["a"])(C,y,x,!1,null,"57f5be19",null));M.options.__file="Signin.vue";var L=M.exports,j=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"page-container full-page"},[s("md-app",{staticClass:"full-page"},[s("md-app-toolbar",{staticClass:"md-primary"},[s("div",{staticClass:"md-toolbar-row"},[s("div",{staticClass:"md-toolbar-section-start"},[""===e.talkingUser?s("span",{staticClass:"md-title"},[e._v("Baatein Etihaas")]):e._e(),""!==e.talkingUser?s("span",{staticClass:"md-title"},[e._v("Baatein Etihaas - "+e._s(e.talkingUser.username))]):e._e()]),s("div",{staticClass:"md-toolbar-section-end"},[s("md-button",{staticClass:"md-raised",on:{click:e.logout}},[e._v("Logout")])],1)])]),s("md-app-drawer",{attrs:{"md-permanent":"full"}},[s("md-toolbar",{staticClass:"md-transparent",attrs:{"md-elevation":"0"}},[s("md-field",[s("md-icon",[e._v("search")]),s("label",[e._v("Enter name")]),s("md-input",{attrs:{type:"text"},model:{value:e.searchText,callback:function(t){e.searchText=t},expression:"searchText"}})],1)],1),e._l(e.filteredUsers,function(t){return s("md-list",[s("md-list-item",{class:{active:t._id===e.talkingUser._id},on:{click:function(s){e.changeTalkingUser(t)}}},[s("md-icon",[e._v("account_circle")]),s("span",{staticClass:"md-list-item-text"},[e._v(e._s(t.username))]),t.unread?s("md-badge",{staticClass:"md-square badge",attrs:{"md-content":"NEW"}}):e._e()],1)],1)})],2),s("md-app-content",[""===e.talkingUser?s("div",[s("div",{staticClass:"welcome-card"},[s("h2",[e._v("Welcome to Baatein "),s("md-icon",[e._v("chat")])],1),s("h4",[e._v("A world full of gossips")]),s("p",[e._v("Search for a friend and just start your bak-bak!!")])])]):e._e(),""!==e.talkingUser?s("div",[s("div",{staticClass:"msg-list"},e._l(e.messageList,function(t){return s("div",[t.from==e.talkingUser._id?s("div",{staticClass:"md-layout md-alignment-bottom-left padding left"},[s("div",{staticClass:"message-border message-conf received"},[e._v(e._s(t.data))])]):e._e(),t.from!=e.talkingUser._id?s("div",{staticClass:"md-layout md-alignment-bottom-right padding right",staticStyle:{"padding-right":"40px"}},[s("div",{staticClass:"message-border message-conf sent"},[e._v(e._s(t.data))])]):e._e()])})),s("div",{staticClass:"input-msg"},[s("md-field",[s("label",[e._v("Enter your message here")]),s("md-textarea",{model:{value:e.message,callback:function(t){e.message=t},expression:"message"}})],1),s("div",{staticClass:"md-layout md-alignment-bottom-right"},[s("md-button",{staticClass:"md-raised md-primary",on:{click:function(t){e.sendMessage(e.message),e.message=""}}},[e._v("Send message")])],1)],1)]):e._e()])],1),s("md-snackbar",{attrs:{"md-position":e.position,"md-duration":e.isInfinity?1/0:e.duration,"md-active":e.showSnackbar,"md-persistent":""},on:{"update:mdActive":function(t){e.showSnackbar=t}}},[s("span",[e._v(e._s(e.snackbarMessage))])])],1)},O=[],T=(s("4917"),s("ac6a"),{sendMessage:function(e,t){return p().post("send/"+e,{message:t}).then(function(e){return e})},retrieveMessage:function(e){return p().get("chat/show/"+e).then(function(e){return e})}}),$=s("c9df"),E=s.n($),A={data:function(){return{users:[],usersmsg:{},searchText:"",currentUser:[],messageList:[],message:"",talkingUser:"",socket:"",showSnackbar:!1,position:"left",duration:4e3,isInfinity:!1,snackbarMessage:""}},methods:{getUsers:function(){var e=Object(m["a"])(regeneratorRuntime.mark(function e(){var t,s=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,U.getAllUsers();case 3:t=e.sent,t["data"].forEach(function(e){s.currentUser._id!==e._id&&(e.unread=!1,s.users.push(e))}),e.next=11;break;case 7:e.prev=7,e.t0=e["catch"](0),this.showSnackbar=!0,this.snackbarMessage=e.t0;case 11:case"end":return e.stop()}},e,this,[[0,7]])}));return function(){return e.apply(this,arguments)}}(),isUserLoggedin:function(){U.isLoggedin().then(function(e){this.currentUser=e.data}.bind(this),function(e){this.$router.push({name:"signin"})}.bind(this))},sendMessage:function(e){T.sendMessage(this.talkingUser._id,e).then(function(e){this.usersmsg[this.talkingUser._id].push(e.data),this.messageList=this.usersmsg[this.talkingUser._id]}.bind(this)).catch(function(e){this.showSnackbar=!0,this.snackbarMessage=e})},changeTalkingUser:function(e){if(e._id in this.usersmsg){this.messageList=this.usersmsg[e._id],this.talkingUser=e;for(var t=0;t<this.users.length;t++)if(this.users[t]._id==e._id){this.users[t].unread=!1;break}}else T.retrieveMessage(e._id).then(function(t){this.usersmsg[e._id]=t.data,this.messageList=t.data,this.talkingUser=e;for(var s=0;s<this.users.length;s++)if(this.users[s]._id==e._id){this.users[s].unread=!1;break}}.bind(this)).catch(function(e){this.showSnackbar=!0,this.snackbarMessage=e})},connectsocket:function(){this.socket=E()("http://localhost:4000"),this.socket.on("connect",function(){console.log("connect")}),this.socket.on("new-message",function(e){var t=e.from;if(this.usersmsg[t]){if(this.usersmsg[t].push(e),this.talkingUser._id==t)this.messageList=this.usersmsg[t];else for(var s=0;s<this.users.length;s++)if(this.users[s]._id==t){this.users[s].unread=!0;break}}else for(s=0;s<this.users.length;s++)if(this.users[s]._id==t){this.users[s].unread=!0;break}}.bind(this))},logout:function(){b.logout().then(function(e){this.showSnackbar=!0,this.snackbarMessage="Logout Sucessful",setTimeout(function(){this.$router.push({name:"signin"})}.bind(this),1e3)}.bind(this),function(e){this.showSnackbar=!0,this.snackbarMessage="Logout Unsucessful"}.bind(this))}},mounted:function(){this.getUsers(),this.connectsocket()},computed:{filteredUsers:function(){this.users;return this.users.filter(function(e){return e.username.match(this.searchText)}.bind(this))}},beforeMount:function(){this.isUserLoggedin()}},R=A,P=(s("37f3"),Object(r["a"])(R,j,O,!1,null,"660d2ed1",null));P.options.__file="Dashboard.vue";var I=P.exports;n["default"].use(d["a"]);var B=new d["a"]({mode:"history",base:"/",routes:[{path:"/",name:"register",component:w},{path:"/signin",name:"signin",component:L},{path:"/user/:username",name:"userDash",component:I}]}),D=s("2f62");n["default"].use(D["a"]);var N=new D["a"].Store({state:{},mutations:{},actions:{}}),q=s("9483");Object(q["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},cached:function(){console.log("Content has been cached for offline use.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});var F=s("43f9"),J=s.n(F);s("51de");n["default"].config.productionTip=!1,n["default"].use(J.a),new n["default"]({router:B,store:N,render:function(e){return e(u)}}).$mount("#app")},ce89:function(e,t,s){},d3dd:function(e,t,s){}});
//# sourceMappingURL=app.e62edcee.js.map